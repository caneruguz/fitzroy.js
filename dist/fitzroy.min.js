/**
 ** FitzRoy.js
 ** @author jeffspies
 ** @author caneruguz
 **/
Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1),o=this,r=function(){},i=function(){return o.apply(this instanceof r&&t?this:t,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i});var finch=require("finch"),History=require("history"),$=require("jquery"),FitzRoy=FitzRoy||function(){var t=function(){$.expr[":"].external=function(t){var n=/^\w+:\/\//,o=$(t).attr("href");return void 0!==o&&-1!==o.search(n)},$.expr[":"].internal=function(t){return void 0!==$(t).attr("href")&&!$.expr[":"].external(t)},History.options.debug=!1,History.Adapter.bind(window,"statechange",function(){finch.call(History.getState().hash)})};t()};FitzRoy.prototype.getHash=function(){return History.getState().hash},FitzRoy.prototype.pushState=function(t,n,o){History.pushState(t,n,o)},FitzRoy.prototype.call=function(t){finch.call(t)},FitzRoy.prototype.add=function(t,n,o){var r=this.base;"["===t.substring(0,1)&&(t=t.substring(1,t.length),r="["+r),t=r+t,finch.route(t,function(t){n.call(o,t)})},FitzRoy.prototype.ajaxify=function(t){t instanceof $||(t=$(t));var n="a:internal:not(.no-ajax)";$(t).off("click",n).on("click",n,function(t){var n=$(this),o=n.attr("href"),r=n.attr("title")||null;return 2==t.which||t.metaKey?!0:(History.pushState(null,r,o),t.preventDefault(),!1)})},module.exports=FitzRoy;